{% extends "base.html" %}
{% block content %}
    
{% if session.user|lower == "admin2"|lower %}
    <div class="row">
        <div class="col offset-m3 offset-l4 center-align genre-container">
            <h3 class="center-align text-shadow">Manage Genres</h3>
            <a class="waves-effect btn" href="{{ url_for('add_genre') }}">
                Add Genre <i class="fas fa-plus"></i>
            </a>
        </div>   
    </div>
{% else %}
    <h3 class="center-align text-shadow">Genres</h3>
{% endif %}

<!-- Genre gallery -->
<section class="row">
    <div class="gallery container">
        <div class="row">
            {% for genre in genres %}
                <div class="col s12 m6 l4 card-grid">
                    <div class="card text-shadow" id="{{ genre.genre_id }}" >
                        <div class="card-content">
                            <span class="card-title center-align">{{ genre.genre }}</span>
                            <div class="card-image waves-effect waves-block waves-light">
                            </div>
                        </div>
                        <div class="card-action center-align">
                            {% if session.user|lower == "admin2"|lower %}
                                <a data-target="{{ genre._id }}" class="btn-small red modal-trigger">Delete</a>
                                <a href="{{ url_for('edit_genre', genre_id=genre._id) }}" class="btn-small amber darken-3">Edit</a>
                            {% endif %}  
                        </div>
                    </div>
                </div>
                <!--Delete Genre Modal-->
                <div id="{{ genre._id }}" class="modal center-align">
                    <div class="modal-content">
                        <div class="row">
                            <div class="col s12">
                                <h3 class="red-text flow-text">
                                    <strong>
                                        <i class="fas fa-exclamation-circle"></i>
                                        Warning: Once you delete a genre it cannot be restored!
                                    </strong>
                                </h3>
                                <h3 class="red-text flow-text">
                                    <strong>
                                        Are you sure you want to delete this genre?
                                    </strong>
                                </h3>
                            </div>                                
                        </div>
                    </div>
                    <div class="modal-footer modal-btns">
                        <a class="waves-effect btn modal-close" href="#">
                            Cancel <i class="fas fa-times"></i>
                        </a>
                        <a class="btn" href="{{ url_for('delete_genre', genre_id=genre._id) }}">
                            Delete <i class="fas fa-trash"></i>
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

{% endblock %}