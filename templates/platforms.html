{% extends "base.html" %}
{% block content %}
    
{% if session.user|lower == "admin2"|lower %}
    <div class="row">
        <div class="col offset-m3 offset-l4 center-align genre-container">
            <h3 class="center-align text-shadow">Manage Platforms</h3>
            <a class="waves-effect btn" href="{{ url_for('add_platform') }}">
                Add Platform <i class="fas fa-plus"></i>
            </a>
        </div>   
    </div>
{% else %}
    <h3 class="center-align text-shadow">Platforms</h3>
{% endif %}

<!-- Platform gallery -->
<section class="row">
    <div class="gallery container">
        <div class="row">
            {% for platform in platforms %}
                <div class="col s12 m6 l4 card-grid">
                    <div class="card text-shadow" id="{{ platform.platform_id }}" >
                        <div class="card-content">
                            <span class="card-title center-align"><a href="{{ url_for('find_platform', platform=platform.platform) }}">{{ platform.platform }}</a></span>
                            <div class="card-image waves-effect waves-block waves-light">
                                <img src="{{ platform.img_url }}">
                            </div>
                        </div>
                        <div class="card-action center-align">
                            {% if session.user|lower == "admin2"|lower %}
                                <a data-target="{{ platform._id }}" class="btn-small red modal-trigger">Delete</a>
                                <a href="{{ url_for('edit_platform', platform_id=platform._id) }}" class="btn-small amber darken-3">Edit</a>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <!--Delete Platform Modal-->
                <div id="{{ platform._id }}" class="modal center-align">
                    <div class="modal-content">
                        <div class="row">
                            <div class="col s12">
                                <h3 class="red-text flow-text">
                                    <strong>
                                        <i class="fas fa-exclamation-circle"></i>
                                        Warning: Once you delete a platform it cannot be restored!
                                    </strong>
                                </h3>
                                <h3 class="red-text flow-text">
                                    <strong>
                                        Are you sure you want to delete this platform?
                                    </strong>
                                </h3>
                            </div>                                
                        </div>
                    </div>
                    <div class="modal-footer modal-btns">
                        <a class="waves-effect btn modal-close" href="#">
                            Cancel <i class="fas fa-times"></i>
                        </a>
                        <a class="btn" href="{{ url_for('delete_platform', platform_id=platform._id) }}">
                            Delete <i class="fas fa-trash"></i>
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
</section>

{% endblock %}